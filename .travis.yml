sudo: required
language: node_js
node_js:
  - node
notifications:
  email: false
services:
  - docker
script:
  - npm run test:coverage
  - npm run lint:prettier
  - npm run lint:js
  - npm run lint:css
  - npm run lint:whitespace
after_success:
  - npm run build:client
  - npm run build:server
  - docker login -u $DOCKER_USER -p $DOCKER_PASS
  - export REPO=ismay/ismaywolff.nl
  - export BRANCH=$(if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then echo $TRAVIS_BRANCH; else echo $TRAVIS_PULL_REQUEST_BRANCH; fi)
  - if [ "$BRANCH" == "master" ] || [ "$BRANCH" == "develop" ]; then docker build -f Dockerfile -t $REPO:$BRANCH .; fi
  - if [ "$BRANCH" == "master" ]; then docker tag $REPO:$BRANCH $REPO:$(git log -n 1 --pretty=format:%f $TRAVIS_COMMIT); fi
  - if [ "$BRANCH" == "master" ]; then docker tag $REPO:$BRANCH $REPO:latest; fi
  - if [ "$BRANCH" == "master" ] || [ "$BRANCH" == "develop" ]; then docker push $REPO; fi
env:
  global:
    - DOCKER_USER=ismay
    # DOCKER_PASS
    - secure: "JSmpWcF31UlvHNElQRjK6hIi9oaQXYldXeW+/rt5bcNstJLkz6OuRqqaJhzu5GHwyytadmbHPn89zYP++T05b/J5ySI9YvMe3GY5UNj7vDLe8vwcP+aM2egLrmWBPF5/5Bw7ET564Qc8N5a041e9V7TE/lUuhriGKx5XE5Yob0UWWvd48ZRPg5FhI8Iu8ZgsFxJ6Efq+1z8RXLQKd0dnFjZ1ndDi7yFjegEXb0PbqKnrlB2zxrhU97kdiUA8aCoGnjVj52mcZMwKiAaTWV6sZGYbPx2abMZVaUnXL+VUp5dI7Rvsn6D3TKYjWmantkoJHw2+0Jz+Q6YleQnABbwCrimH86BkjpyWmvkJfUurGK8the1XqZX99vvA1VsGytSach7IvPBx3kifUdVDFKXM5v9PZPjznrVCtiSl8eu/N71B207I4wxsrgAf345PVDo2I8w3/uFPq0acNcjhuFncRfCBbckGZDm2JZMJOZx6BNcOSItwOM00RxcNrjF0ocdGYbN4LdmTpmq8rJhDWKuhTpKm1HTV6Pa3B9JVVGs1bkcnQffrgiJJa/wdFEJfYetKN3ltjwS5kp89o6cS2XuCY+XcHntMWBCMZdcg1Erf5ieEU8I0Uf+MEdqdiKH5PsNb7U7zyRMZSAAtYPvzhBRJtNGXdSctT9oIwQJZP/W8pzs="
    # CONTENT_DELIVERY_TOKEN
    - secure: "G3DoQ0Ulm9OeblOlndzSanRu3tea3oE+nODMWz7eGQhNicgK8J+1YtMuOw+0gXpwniKbyweshJu8mGF5Yk1B6j7sKX0DaNojshrktyNQ2joZQEh3eq+1hoHgO2/VGBPdn20jDi9RmkJEPGAqVaJxTRdPopki2JGEyjZTPOANzf3SwdSuXD5VQvTs9rt9muIdhk6XGKJHXC32SjUzeSQAbgyLcEr025uML5J1HhQXKopYexQmz9+Nx5o/VdpMlFLdjnpMy8qSQK8SP2vQ5OW/9jXo5K/dy+tz/bs3bVncaYiF8nbbrXJZftNfmv0DFXSeywzCPiLRHs3Dqv1D4Zuc1es6LRGXED2rMoclQthBPFR2U0/ndMEokFDZZASqEY3jxOpZC9BcCzfppIkfQOoI7DqU7+xtOPlE96GVQ+I/YRfvHavnHsz8z/ZdAa7quETqYlBW/lM7QoHM8FIy/L71Zq80d1EmawYy4IUUdpTOTm5PaC+FWSzWgMitzqfK1LzN9iAsielHwEyNFT5rhkjngOoepuPqDvQQb7gj2+AnWpEaGP3A1wNBif5avLnTiJ6KaqjETCnb+eDcB9LxjbEUNKV476wK9dykOITl7KAle39Dm7T+kjIRM25QZT9WSrW0AA5bsYRG96XMFpfOACACt2BDSRmqNLlQFDKlWBXE8eE="
    # SPACE_ID
    - secure: "Ad6Y6ehhPZdYncrX3sG768Ex0Crm1GGhKzji5lHbvnIqn5abeZdTJ7EgV/CXlLzT4LYoJw9Oo9gBoL67tGlWlY3XyVY6CTEOtPq6gBh5MkGdI1Rg21SBHownUQWSEgmvtZALgnQ7o2Q0KQOEHHfgSsDDbRdaZhkEOGceyTfecTTMBzExOeasKIoyxCpbwoI45CvQFK4u9fbjid7xfqKYaTE4eZQAFx3UIKjrNBZ6ifVlWKKmX7QgfXmAKcIzgjI42q9KQsmsg0opGdSf9EIpF9sAkDPGpzBVROfxTnxBWCUinlusnLp/M6Vpbemx9bzvWrVgztllrMHvSSnzJIbDtlHGu3orckuD6ImJSlSb/H7SXNgpEqj2uXBo/oe+2ed9PjGE2OfblH01MzG8izcFuECmduz9cZ811/8gBpmoU9o7we4jOGT+twRJdYC0nNerCBjgMM9gK1wi9yc0X9V71CHhF3QtbcDYYcv5V5DuEcMBqTKP/3OAnh7GIUtCoJsFTP2/qVAuCMejEHDNbl/LPsjE2vmry8egOcFLG0Tx5SCcGv0BOQtkpnrCwC8f3yjHk+zFcdcYG9U1q5Ooa0eNMd9HOJ4LN2VzKiIffzONBCQZqDC8QOV+t6W4aY9SHxzvnyMH0ipAausvLmkiNRc0tnk1mrNWnYrS6ZEi3WBE4W0="
    # PROD_TRACKING_ID
    - secure: "CUzWS6ZNrW49LNG/1mmfnkwDM3/Acu26vqeWo4FmrjYX3QOXeP4jhEu+9zjZJaFK0x2nhtXeFQHIL9RumDtBqHutf0AMO1WgS7i8KNhNj4RNa/OE7fk0wcb7ohIzFhBo/Mo/MYwhhBhkRg9siU7n+LdlAn4dcW/Dys75lK1nqgwStEMWFN5Wv7Q9Bbl25OPu4U5xcRdTVkDvmTQZbaqstcdyUwWC8zqQfkI2bYb7hbXcWM+4QLo1ar0xx/0c3/od8ryDIdDdN6k/ijcXoaTIU1N4C7qVTqYet0Hy3c5iwBjLVTO3xMqVIrXcaAIi5HCtimZ+eYz+nbBv0NdS0nD5nbM/btQ+NnIzS+DlTtU88KcXEaamZIiCLuAHgvwHgsPzr9RCko1uXkMfPVZhBTBOz5vmW61YybO4eWuajCsMJ1QFxxbwro8PoVB4xuBMhkIwHyCDJ85EWkkoM0EJ8Xr/lkOUeW5rP5cOhGjZm8i42cgYSwF0vLbrZUaHGXsixlIgU5Vw/hWVUzKM+MfGO8Prn6H3gknguZKBGvV6IaOWz/0X9tFnXD6FOC4mcu7e9mQzMXa2i2qLmH28yo6DUS6jZU3804LB1Uc9dz/nBJ+M7XlyylqkiUDFPkXZuUEzpA4Ny5DXWVxwgDM8ERplT22oWiN6ZI6k+wWbWSaNKC1+F5g="
    # SENTRY_APP
    - secure: "clMIUeAqm+key0kOtb8Xkjo4nH2eLheqBuyv8RNi+B5uE8cL2N6PEZJy7AhAA2Fi5st/kZw8gvOUHpN4rGl330JsvBMym/ws10vM4z4UEn+usdlG3QedkIUSsWG0mL3l2uAaIWTl4P6YnY6R2Wty9QVZPLl6LgF2x6Zd6B7/yR0Wj02CNMDQqKFHXm6Pm0xA/z/UnhxAF8IdeO3D4Dab6+TiR1cbBf5KIh6IQzo/hnFjK9sXKRMkCpFkOaiDyxuLRw6ABGZHMYeKpSeGZ0rHHCzQRtGvdaUzwJ3fwdGIKwKcwFqYqXZAHKt9oH7mMSR6NGtTb6NuuDReZIRuvdV6KjOY2xXrku3uFXT1Xn+1yO8X2QEVCt5uy0oNVFd9z0iuldvIlMhUQyjQKf90eZzXPj0I0qNvuIyIbb10GQpUkyIrxuxKCaEpoySx1Ng9ptUUFEhbFNIVR5F1EfCegCAPpIuZiLUE9RdlYsBX+q5zOcwTJelO8qLx/fVq/GgCyVqhmZY4K8qrvPUtteK5RGXqeXIfGwsl6/ZSLnEElcwFo5qakIRMf9IHdqT7cnXcNckZD06VC7fyHw6FQCCuI95+GiNXZsD6we3bc5rnAHrk70cxF751OjcJqL7hgmaD4LnxPOMEslyPUPSuXU/srKMTsUfBbDHniJhTUVUrIeFryYA="
    # SENTRY_CLIENT_KEY
    - secure: "ELsFTY5NtSSnrvMnk3aDQ/zhDFSrjV4AFZSW6X4a2TWz+eOr0WDrhPXBxBsp0YvtTRHSoWalLWEVc0pwIKQnLYZesh+P9pKCOuLf2GUqeEnRltRFlchH8kv/zm1jijYYErVgzeuL1Hj83p6ToaCFSjzsARcJQNuuJLFUI82wsQ4VKe4jLJXzCcQzfwKqJOztQ2ywj5IOqIdFtrFWGdrbv1ZIdAig2SIVxk+dGIlnynzQg7xEyvuP4e1Bmc+QVn4Y+L1gOVVbZFPjk9JZxPX7Q1PMTiY6H989aVDX4PEFSpLSdG2sjoOHx7HP4e4GQUwmwQIinFjckBYiEc07IH6kVOQSWxUZJ8XDf3nU5WRG/N45RE/wKFdfO3AUReZmBJtb/ZxY3BZy4ON6wi2hYZD9SxpQRtc4iROxBW6dBLVfcom1OKatqbS5GvW+nzZPS2i3/UWOLnbK+dJC3Yg9AiampKGpIc9duBq84zn+f0zrwBMIqHx/qj9BVrADIdiM+vRmEpHuNFY56GHBF60eWLpBle0ajRlkCs4VxRnc3H6l7ptBS7+H3dg77y0hG5+ymZyazR2eN2mbNT+4B44Umattuq+z8sO+xloqIybNSXa0moJttf0GA/R+Ye5a+qL3agF4z4pLwRRYy6VZG0vxueIo4zIoLLtUF7KUpOxBnF4Zbkc="
    # SENTRY_SERVER_KEY
    - secure: "Y4SoQHke8qDBfiq2OkwZj/PqpHAfvhlgnrBmlltataUdbrc7MycaTYsTL1+Ynp1sRvS04ZycbwpaLPLnLv4KPujuYQnnOmU381jV0nWnp9m+9+CX/UQwl9gffg5tCwzEp9rvqouXaJg6abeuHqjzXdbnEut6kIEnuxfrQrxzMwC9diQbdrBDqJIv4chWI/WD/PDCsfJmtbT030BQdulNrkPlvaJfBng6FrRyRE/ignlUssyzVA+pbpRYxemg6CKGDzGAAAb9CwfseiyYVW7HgSvkZP/9h93hxVSKpI1LrFq9HW/HNqPh6my2dQ/Jukljuue4vzkAQfVrNTYsumpHZck1I+fXsdt0/NzZfukno3GLptOISVI70EFbjsNPDbsj0mH+YSgFHi/AXxVGSoovzJF8jYg6GCFHY1LM+/Veh8L39fAhxHGSVosDgCgfUZV1Jbg8F9P9ycID/AgHnNXH+SK7owDMVG8bHvGXzw7se9gPQITIB36MTuWavcYrlBD2zZEjNsHy3lHEwwqPstGtvgbpC1qU2DjdjPqasIQQ0cV7k7jL8ZrDyaTKYlShxlx/4ZEm1gJmpcED8bRUVOTyBb7HU+zTqQPgRd/LfB8d2WCO++cEu0LSksm2oJgXp6aSR4+h1a5bofqs3xwIhAe43JBns5cxcD9rcR1byzUpbt4="
    # SENTRY_API_KEY
    - secure: "KS5diep5JHjpfIkq+G8lOzCzfquUdIw1pdDrcM0gPeEYKyQ86cky3Qd9/f4e7oEmKsyWVv9UXqMzVqLm9TNT60+GpkacIrQOuxk+FeZYxjM3UUah7uxVlasSviuXcEnaCHklRpwy3BXi7V9PhyTWaNYYPH/U+v599k9Wdxc1DLYDWx5aWzjX68ib59yJf3lCtaeUdujtYh6EiaLE8iyfux9ArONKxoQb7QR25LtoN8CVHw2xqJ96oPSkIxoXXk8jsPgC/B5la/Nj596hpSI5zp7JzpDE9pQ3DTrIl7YJDgU/FpR1ZrcC2tdrJfk9WYVi5vGBRsJrOVc7plrmfk6ydQax3AefpbGOzKXBXEzlbhHkyjHlCqLpCBfD7LTAx7NuGaZZXa2yHf3MLEzebrZmHTgBiyp9eq5SCs/kduo0z/a2Lf/i9h6hAogYYQODKW7TWKBscnLjH3c6mTYoxGuLS8jwOmZgxN+IATq/dFPBpShTFt8Q0wne8IKaUIMIMq8djWr5kAYX3sk+Bf8San6xub6aOZq147AUanuU+IxbBV/MwfmJIkGWv8BtEMoooY+KQmg65Zza99I67foTHPPqkTSA+zEhGgC/ynA55jgDgyoCT0lzeSzT/gsXcntDJaBHP09jJk5+YjpB07o7CTlDIWoNQh3QCnaLQIH2RWLE60E="
